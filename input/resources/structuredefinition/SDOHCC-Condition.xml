<?xml version="1.0" encoding="UTF-8"?>
<StructureDefinition
    xmlns="http://hl7.org/fhir">
    <id value="SDOHCC-Condition"/>
    <meta>
        <versionId value="23"/>
        <lastUpdated value="2022-08-30T13:43:44.568+00:00"/>
        <source value="#w2NX9ggeoO7TtL08"/>
    </meta>
    <url value="http://hl7.org/fhir/us/sdoh-clinicalcare/StructureDefinition/SDOHCC-Condition"/>
    <version value="0.1.0"/>
    <name value="SDOHCCCondition"/>
    <title value="SDOHCC Condition"/>
    <status value="draft"/>
    <date value="2020-12-14T04:01:34+00:00"/>
    <description value="Profile for Social Determinants of Health (SDOH) conditions."/>
    <jurisdiction>
        <coding>
            <system value="urn:iso:std:iso:3166"/>
            <code value="US"/>
        </coding>
    </jurisdiction>
    <fhirVersion value="4.0.1"/>
    <mapping>
        <identity value="workflow"/>
        <uri value="http://hl7.org/fhir/workflow"/>
        <name value="Workflow Pattern"/>
    </mapping>
    <mapping>
        <identity value="sct-concept"/>
        <uri value="http://snomed.info/conceptdomain"/>
        <name value="SNOMED CT Concept Domain Binding"/>
    </mapping>
    <mapping>
        <identity value="v2"/>
        <uri value="http://hl7.org/v2"/>
        <name value="HL7 v2 Mapping"/>
    </mapping>
    <mapping>
        <identity value="rim"/>
        <uri value="http://hl7.org/v3"/>
        <name value="RIM Mapping"/>
    </mapping>
    <mapping>
        <identity value="w5"/>
        <uri value="http://hl7.org/fhir/fivews"/>
        <name value="FiveWs Pattern Mapping"/>
    </mapping>
    <mapping>
        <identity value="sct-attr"/>
        <uri value="http://snomed.org/attributebinding"/>
        <name value="SNOMED CT Attribute Binding"/>
    </mapping>
    <mapping>
        <identity value="argonaut-dq-dstu2"/>
        <uri value="http://unknown.org/Argonaut-DQ-DSTU2"/>
        <name value="Argonaut-DQ-DSTU2"/>
    </mapping>
    <kind value="resource"/>
    <abstract value="false"/>
    <type value="Condition"/>
    <baseDefinition value="http://hl7.org/fhir/us/core/StructureDefinition/us-core-condition"/>
    <derivation value="constraint"/>
    <differential>
        <element id="Condition">
            <path value="Condition"/>
            <short value="Detailed information about SDOH conditions, problems or diagnoses"/>
            <definition value="For representation of SDOH conditions."/>
            <comment value="Many of the SDOHCC profiles reference one another. One flow supported by this IG is that QuestionnaireResponses result in Observations that can be used as evidence for Conditions that can lead to Goals, ServiceRequests and Procedures. However, alternatives paths (e.g., to arrive at SDOH Conditions) are also possible.&#xD;&#xA;&#xD;&#xA;One specific use for this profile is to represent a Health Concern that is either; 1) directly asserted based on the patient’s answer to a specific question from an SDOH screening questionnaire or 2) computed/generated based on the patient’s answers to multiple questions. The questions and answers from the screening questionnaire are also represented using SDC Questionnaire, SDC QuestionnaireResponse and SDOHCC Screening Response Observation."/>
            <constraint>
                <key value="SDOH-Con-1"/>
                <severity value="error"/>
                <human value="Can only have a max of one asserter."/>
                <expression value="extension('http://hl7.org/fhir/us/sdoh-clinicalcare/extension-Condition.asserter').count()+asserter.count()&lt;=1"/>
                <xpath value="true()"/>
            </constraint>
            <constraint>
                <key value="SDOH-Con-category-educational-attainment-code"/>
                    <severity value="error"/>
                    <human value="If category is educational-attainment, then the code is from the VSAC - Less than high school education Diagnoses ValueSet"/>
                <expression value="category.coding.where(code = 'educational-attainment').exists().not() xor code.coding.where(code.memberOf('https://cts.nlm.nih.gov/fhir/res/ValueSet/2.16.840.1.113762.1.4.1247.103')).exists()"/>
                <source value="http://hl7.org/fhir/us/sdoh-clinicalcare/StructureDefinition/SDOHCC-Condition"/>
            </constraint>
            <!--
            <constraint>
                <key value="SDOH-Con-category-food-insecurity-code1"/>
                    <severity value="error"/>
                    <human value="If category is food-insecurity, then the code is from the VSAC - Less than high school education Diagnoses ValueSet"/>
                <expression value="code.where(memberOf('https://cts.nlm.nih.gov/fhir/res/ValueSet/2.16.840.1.113762.1.4.1247.17')).exists()"/>
                <source value="http://hl7.org/fhir/us/sdoh-clinicalcare/StructureDefinition/SDOHCC-Condition"/>
            </constraint>
            <constraint>
                <key value="SDOH-Con-category-food-insecurity-code2"/>
                    <severity value="error"/>
                    <human value="If category is food-insecurity, then the code is from the VSAC - Less than high school education Diagnoses ValueSet"/>
                <expression value="code.coding.where(memberOf('https://cts.nlm.nih.gov/fhir/res/ValueSet/2.16.840.1.113762.1.4.1247.17')).exists()"/>
                <source value="http://hl7.org/fhir/us/sdoh-clinicalcare/StructureDefinition/SDOHCC-Condition"/>
            </constraint>-->
            <constraint>
                <key value="SDOH-Con-category-food-insecurity-code"/>
                    <severity value="error"/>
                    <human value="If category is food-insecurity, then the code is from the VSAC - Less than high school education Diagnoses ValueSet"/>
                <expression value="category.where(coding.code = 'food-insecurity').exists().not() xor code.where(memberOf('https://cts.nlm.nih.gov/fhir/res/ValueSet/2.16.840.1.113762.1.4.1247.17')).exists()"/>
                <source value="http://hl7.org/fhir/us/sdoh-clinicalcare/StructureDefinition/SDOHCC-Condition"/>
            </constraint>
            <constraint>
                <key value="SDOH-Con-category-homelessness-code"/>
                    <severity value="error"/>
                    <human value="If category is homelessness, then the code is from the VSAC - Less than high school education Diagnoses ValueSet"/>
                <expression value="category.where(coding.code = 'homelessness').exists().not() xor code.where(memberOf('https://cts.nlm.nih.gov/fhir/res/ValueSet/2.16.840.1.113762.1.4.1247.18')).exists()"/>
                <source value="http://hl7.org/fhir/us/sdoh-clinicalcare/StructureDefinition/SDOHCC-Condition"/>
            </constraint>
        </element>
        <element id="Condition.extension">
            <path value="Condition.extension"/>
            <slicing>
                <discriminator>
                    <type value="value"/>
                    <path value="url"/>
                </discriminator>
                <rules value="open"/>
            </slicing>
            <min value="0"/>
        </element>
        <element id="Condition.extension:asserterDevice">
            <path value="Condition.extension"/>
            <sliceName value="asserterDevice"/>
            <requirements value="For a condition that is autogenerated based on a computation that uses the patient’s answers to multiple questions on a SDOH questionnaire, this extension should be used to specify the device used to compute the condition."/>
            <min value="0"/>
            <max value="1"/>
            <type>
                <code value="Extension"/>
                <profile value="http://hl7.org/fhir/us/sdoh-clinicalcare/StructureDefinition/SDOHCC-ExtensionConditionAsserter"/>
            </type>
            <condition value="SDOH-Con-1"/>
            <mustSupport value="true"/>
        </element>
        <element id="Condition.extension:asserterDevice.value[x]">
            <path value="Condition.extension.value[x]"/>
            <type>
                <code value="Reference"/>
                <targetProfile value="http://hl7.org/fhir/StructureDefinition/Device"/>
            </type>
        </element>
        <element id="Condition.verificationStatus">
            <path value="Condition.verificationStatus"/>
            <comment value="verificationStatus is not required.  For example, when a patient complains of stress during a provider encounter, there is not likely going to be a verification status. The data type is CodeableConcept because verificationStatus has some clinical judgment involved, such that there might need to be more specificity than the required FHIR value set allows. For example, a SNOMED coding might allow for additional specificity.&#xD;&#xA;&#xD;&#xA;For SDOH conditions that are autogenerated based on a questionnaire response, the Condition.asserter is a “Device” AND Condition.Category should be &quot;health-concern&quot;. In that case, Condition.verificationStatus should be &quot;unconfirmed&quot; and should be changed to “confirmed” only after review and concurrence by the provider and patient."/>
        </element>
        <element id="Condition.category">
            <path value="Condition.category"/>
            <slicing>
                <discriminator>
                    <type value="value"/>
                    <path value="$this"/>
                </discriminator>
                <rules value="open"/>
            </slicing>
            <requirements value="For a condition that is autogenerated based only on an individual's responses to an SDOH questionnaire, category should be &quot;health-concern&quot;."/>
        </element>
        <element id="Condition.category:SDOH">
            <path value="Condition.category"/>
            <sliceName value="SDOH"/>
            <short value="e.g., food-insecurity | transportation-insecurity"/>
            <definition value="An SDOH category assigned to the condition."/>
            <requirements value="Codes from this value set can be used to assign one or more SDOH categories (e.g., food-insecurity, transportation-insecurity, etc.) to a condition. It is recommended that SDOH category codes be used to facilitate searching for SDOH conditions."/>
            <binding>
                <strength value="required"/>
                <description value="Codes for high-level SDOH categories."/>
                <valueSet value="http://hl7.org/fhir/us/sdoh-clinicalcare/ValueSet/SDOHCC-ValueSetSDOHCategory"/>
            </binding>
        </element>
        <element id="Condition.code">
            <path value="Condition.code"/>
            <short value="Identification of the condition, problem or diagnosis (See Contextual Binding for category specific ValueSet requirement)"/>
            <comment value="As the Gravity Project continues to refine content for the SDOH categories (e.g., food, housing, transportation, etc.), this value set will be refined to codes that pertain to SDOH categories. For further guidance on external value sets vetted by the Gravity Project see: [SDOH terminology guidance](support_for_multiple_domains.html#external-value-set-guidance)"/>
            <requirements value="Code is required and must be selected from the bound value set."/>
            <binding>
                <strength value="required"/>
            </binding>
        </element>
        <element id="Condition.bodySite">
            <path value="Condition.bodySite"/>
            <max value="0"/>
        </element>
        <element id="Condition.subject">
            <path value="Condition.subject"/>
            <definition value="Indicates the patient who the condition record is associated with."/>
            <requirements value="US Core Condition Profile restricts subject to patient."/>
        </element>
        <element id="Condition.onset[x]">
            <path value="Condition.onset[x]"/>
            <short value="Estimated dateTime or Period"/>
            <definition value="Estimated or actual dateTime or Period the condition began."/>
            <comment value="For SDOH conditions that have their onset over an extended (or fuzzy) period (e.g., the past month), Condition.onset may use a lower precision representation (e.g., month/year or year) as opposed to a higher precision representation (e.g., year/month/date/hour/min)."/>
            <type>
                <code value="dateTime"/>
            </type>
            <type>
                <code value="Period"/>
            </type>
            <mustSupport value="true"/>
        </element>
        <element id="Condition.abatement[x]">
            <path value="Condition.abatement[x]"/>
            <definition value="The estimated or actual dateTime or Period that the condition resolved or went into remission. This is called &quot;abatement&quot; because of the many overloaded connotations associated with &quot;remission&quot; or &quot;resolution&quot;."/>
            <comment value="There is no explicit distinction between resolution and remission because in many cases the distinction is not clear. If there is no abatement element, it is unknown whether the condition has resolved or entered remission; applications and users should generally assume that the condition is still valid.  When abatementString exists, it implies the condition is abated.&#xD;&#xA;&#xD;&#xA;For SDOH Conditions that have a fuzzy abatement period, a lower precision representation (e.g., month/year or year) may be used. However, for SDOH Conditions that end at a specific point in time (e.g., food insecurity may abate upon acquiring a new job or gaining eligibility to a food program) a higher precision representation (e.g., year/month/date) may also be used."/>
            <type>
                <code value="dateTime"/>
            </type>
            <type>
                <code value="Period"/>
            </type>
            <mustSupport value="true"/>
        </element>
        <element id="Condition.recorder">
            <path value="Condition.recorder"/>
            <requirements value="For a condition that is autogenerated based on a QuestionnaireResponse, the AsserterDevice extension should be used to specify the device used to compute the condition and recorder should be empty."/>
            <type>
                <code value="Reference"/>
                <targetProfile value="http://hl7.org/fhir/StructureDefinition/Practitioner"/>
                <targetProfile value="http://hl7.org/fhir/StructureDefinition/PractitionerRole"/>
            </type>
        </element>
        <element id="Condition.asserter">
            <path value="Condition.asserter"/>
            <short value="Person or device that asserts this condition"/>
            <definition value="The individual or device making the condition statement."/>
            <comment value="References SHALL be a reference to an actual FHIR resource, and SHALL be resolveable (allowing for access control, temporary unavailability, etc.). Resolution can be either by retrieval from the URL, or, where applicable by resource type, by treating an absolute reference as a canonical URL and looking it up in a local registry/repository.&#xD;&#xA;&#xD;&#xA;For a condition that is autogenerated based on the patient directly answering a specific question from an SDOH screening questionnaire, the Condition.asserter should be the patient. For a condition that is autogenerated based on a computation that uses the patient’s answers to multiple questions, Condition.asserter should reference “Device” (using the using AsserterDevice extension) to specify the device used to compute the condition."/>
            <type>
                <code value="Reference"/>
                <targetProfile value="http://hl7.org/fhir/StructureDefinition/RelatedPerson"/>
                <targetProfile value="http://hl7.org/fhir/us/core/StructureDefinition/us-core-patient"/>
                <targetProfile value="http://hl7.org/fhir/us/core/StructureDefinition/us-core-practitioner"/>
                <targetProfile value="http://hl7.org/fhir/us/core/StructureDefinition/us-core-practitionerrole"/>
            </type>
            <condition value="SDOH-Con-1"/>
            <mustSupport value="true"/>
        </element>
        <element id="Condition.stage">
            <path value="Condition.stage"/>
            <max value="0"/>
        </element>
        <element id="Condition.evidence">
            <path value="Condition.evidence"/>
            <mustSupport value="true"/>
        </element>
        <element id="Condition.evidence.code">
            <path value="Condition.evidence.code"/>
            <comment value="Not all terminology uses fit this general pattern. In some cases, models should not use CodeableConcept and use Coding directly and provide their own structure for managing text, codings, translations and the relationship between elements and pre- and post-coordination.&#xD;&#xA;&#xD;&#xA;Information represented by Condition.evidence.code may overlap significantly with information represented by Condition.evidence.detail. Multiple approaches to representing the same information may negatively impact interoperability. Therefore, where similar infomation could be provided by either Condition.evidence.code or Condition.evidence.detail, it is recommended that Condition.evidence.detail should be used as supporting evidence for the condition.&#xD;&#xA;&#xD;&#xA;As the Gravity Project continues to refine content for the SDOH categories (e.g., food, housing, transportation, etc.), this value set may be refined to codes that pertain to SDOH categories."/>
        </element>
        <element id="Condition.evidence.detail">
            <path value="Condition.evidence.detail"/>
            <slicing>
                <discriminator>
                    <type value="profile"/>
                    <path value="resolve()"/>
                </discriminator>
                <rules value="open"/>
            </slicing>
            <comment value="References SHALL be a reference to an actual FHIR resource, and SHALL be resolveable (allowing for access control, temporary unavailability, etc.). Resolution can be either by retrieval from the URL, or, where applicable by resource type, by treating an absolute reference as a canonical URL and looking it up in a local registry/repository.&#xD;&#xA;&#xD;&#xA;Additionally, see Comment for Condition.evidence.code."/>
        </element>
        <element id="Condition.evidence.detail:SupportedDetail">
            <path value="Condition.evidence.detail"/>
            <sliceName value="SupportedDetail"/>
            <definition value="Links to other relevant information."/>
            <requirements value="When a condition is based on one or more SDOH observations that were generated from questionnaire responses, Condition.evidence.detail should reference instances that comply with the SDOHCC Screening Response Observation. However, references to other instance types are also possible."/>
            <type>
                <code value="Reference"/>
                <targetProfile value="http://hl7.org/fhir/us/sdoh-clinicalcare/StructureDefinition/SDOHCC-ObservationScreeningResponse"/>
                <targetProfile value="http://hl7.org/fhir/us/sdoh-clinicalcare/StructureDefinition/SDOHCC-Condition"/>
                <targetProfile value="http://hl7.org/fhir/us/sdoh-clinicalcare/StructureDefinition/SDOHCC-ObservationAssessment"/>
            </type>
            <mustSupport value="true"/>
        </element>
    </differential>
</StructureDefinition>