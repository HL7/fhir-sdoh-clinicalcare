<?xml version="1.0" encoding="UTF-8"?>
<StructureDefinition
    xmlns="http://hl7.org/fhir">
    <id value="SDOHCC-Procedure"/>
    <meta>
        <versionId value="3"/>
        <lastUpdated value="2021-06-04T14:30:59.930+00:00"/>
        <source value="#d9Y8fLlrxTCW9nzl"/>
    </meta>
    <url value="http://hl7.org/fhir/us/sdoh-clinicalcare/StructureDefinition/SDOHCC-Procedure"/>
    <version value="0.1.0"/>
    <name value="SDOHCCProcedure"/>
    <title value="SDOHCC Procedure"/>
    <status value="draft"/>
    <date value="2020-12-14T04:01:34+00:00"/>
    <description value="This profile constrains the Procedure resource for interventions that address Social Determinants of Health."/>
    <jurisdiction>
        <coding>
            <system value="urn:iso:std:iso:3166"/>
            <code value="US"/>
        </coding>
    </jurisdiction>
    <fhirVersion value="4.0.1"/>
    <mapping>
        <identity value="argonaut-dq-dstu2"/>
        <uri value="http://unknown.org/Argonaut-DQ-DSTU2"/>
        <name value="Argonaut-DQ-DSTU2"/>
    </mapping>
    <mapping>
        <identity value="workflow"/>
        <uri value="http://hl7.org/fhir/workflow"/>
        <name value="Workflow Pattern"/>
    </mapping>
    <mapping>
        <identity value="rim"/>
        <uri value="http://hl7.org/v3"/>
        <name value="RIM Mapping"/>
    </mapping>
    <mapping>
        <identity value="w5"/>
        <uri value="http://hl7.org/fhir/fivews"/>
        <name value="FiveWs Pattern Mapping"/>
    </mapping>
    <mapping>
        <identity value="v2"/>
        <uri value="http://hl7.org/v2"/>
        <name value="HL7 v2 Mapping"/>
    </mapping>
    <kind value="resource"/>
    <abstract value="false"/>
    <type value="Procedure"/>
    <baseDefinition value="http://hl7.org/fhir/us/core/StructureDefinition/us-core-procedure"/>
    <derivation value="constraint"/>
    <differential>
        <element id="Procedure">
            <path value="Procedure"/>
            <short value="An action that addresses an SDOH condition, observation, or goal."/>
            <definition value="For procedures that address SDOH conditions, SDOH observations, or SDOH goals."/>
            <comment value="Many of the SDOHCC profiles reference one another. One flow supported by this IG is that QuestionnaireResponses result in Observations that can be used as evidence for Conditions that can lead to Goals, ServiceRequests and Procedures. However, alternatives paths are also possible."/>
            <constraint>
                <key value="SDOH-Pro-1"/>
                <severity value="error"/>
                <human value="At least one category must be an SDOH category."/>
                <expression value="extension('http://hl7.org/fhir/4.5/StructureDefinition/extension-Procedure.category').where(value.memberOf('http://hl7.org/fhir/us/sdoh-clinicalcare/ValueSet/SDOHCC-ValueSetSDOHCategory')).exists() or category.where($this.memberOf ('http://hl7.org/fhir/us/sdoh-clinicalcare/ValueSet/SDOHCC-ValueSetSDOHCategory')).exists()"/>
                <xpath value="true()"/>
                <source value="http://hl7.org/fhir/us/sdoh-clinicalcare/StructureDefinition/SDOHCC-Procedure"/>
            </constraint>
        </element>
        <element id="Procedure.extension">
            <path value="Procedure.extension"/>
            <slicing>
                <discriminator>
                    <type value="value"/>
                    <path value="url"/>
                </discriminator>
                <rules value="open"/>
            </slicing>
        </element>
        <element id="Procedure.extension:CategorySDOH">
            <path value="Procedure.extension"/>
            <sliceName value="CategorySDOH"/>
            <requirements value="This extension can be used to assign one or more SDOH categories (e.g., food-insecurity, transportation-insecurity, etc.) to a procedure. It is recommended that SDOH category codes be used to facilitate searching for procedures that address SDOH conditions. observations, or goals."/>
            <type>
                <code value="Extension"/>
                <profile value="http://hl7.org/fhir/4.5/StructureDefinition/extension-Procedure.category"/>
            </type>
            <condition value="SDOH-Pro-1"/>
            <mustSupport value="true"/>
        </element>
        <element id="Procedure.extension:CategorySDOH.url">
            <path value="Procedure.extension.url"/>
            <fixedUri value="http://hl7.org/fhir/4.5/StructureDefinition/extension-Procedure.category"/>
        </element>
        <element id="Procedure.extension:pertainsToGoal">
            <path value="Procedure.extension"/>
            <sliceName value="pertainsToGoal"/>
            <short value="Pertains to SDOH goal"/>
            <definition value="Indicates that the resource is related to either the measurement, achievement or progress towards the referenced goal.  For example, a Procedure to provide food vouchers pertainsToGoal of achieving food security."/>
            <requirements value="Indicates that the procedure is related to the referenced SDOHCC Goal."/>
            <type>
                <code value="Extension"/>
                <profile value="http://hl7.org/fhir/StructureDefinition/resource-pertainsToGoal"/>
            </type>
            <mustSupport value="true"/>
        </element>
        <element id="Procedure.extension:pertainsToGoal.value[x]">
            <path value="Procedure.extension.value[x]"/>
            <definition value="Value of extension must reference a Goal resource."/>
            <requirements value="Indicates that the procedure is related to the referenced SDOHCC Goal."/>
            <type>
                <code value="Reference"/>
                <targetProfile value="http://hl7.org/fhir/us/sdoh-clinicalcare/StructureDefinition/SDOHCC-Goal"/>
            </type>
            <mustSupport value="true"/>
        </element>
        <element id="Procedure.basedOn">
            <path value="Procedure.basedOn"/>
            <slicing>
                <discriminator>
                    <type value="profile"/>
                    <path value="resolve()"/>
                </discriminator>
                <rules value="open"/>
            </slicing>
            <mustSupport value="true"/>
        </element>
        <element id="Procedure.basedOn:SupportedBasedOn">
            <path value="Procedure.basedOn"/>
            <sliceName value="SupportedBasedOn"/>
            <short value="An SDOH service request for this procedure"/>
            <definition value="A reference to an SDOHCC service request that contains details of the request for this procedure."/>
            <requirements value="When a procedure is based on an SDOH ServiceRequest, Procedure.basedOn should reference instances that comply with the SDOHCC ServiceRequest profile. However, references to other instance types are also possible."/>
            <type>
                <code value="Reference"/>
                <targetProfile value="http://hl7.org/fhir/us/sdoh-clinicalcare/StructureDefinition/SDOHCC-ServiceRequest"/>
            </type>
            <mustSupport value="true"/>
        </element>
        <element id="Procedure.category">
            <path value="Procedure.category"/>
            <definition value="A code that classifies the procedure for searching, sorting and display purposes (e.g. &quot;Social service procedure&quot;)."/>
            <condition value="SDOH-Pro-1"/>
        </element>
        <element id="Procedure.code">
            <path value="Procedure.code"/>
            <short value="Procedure codes from SNOMED CT"/>
            <definition value="The specific procedure that is performed. Use text if the exact nature of the procedure cannot be coded."/>
            <comment value="As the Gravity Project continues to refine content for the SDOH categories (e.g., food, housing, transportation, etc.), the value sets allowed for coding will be refined to codes that pertain to SDOH categories."/>
            <requirements value="In US Core and this IG, computable procedure codes are essential to track execution against best practices and to justify payment."/>
            <binding>
                <strength value="required"/>
                <description value="SNOMED CT codes describing the type of Procedure"/>
                <valueSet value="http://hl7.org/fhir/ValueSet/procedure-code"/>
            </binding>
        </element>
        <element id="Procedure.code.coding">
            <path value="Procedure.code.coding"/>
            <slicing>
                <discriminator>
                    <type value="value"/>
                    <path value="system"/>
                </discriminator>
                <rules value="open"/>
            </slicing>
            <mustSupport value="true"/>
        </element>
        <element id="Procedure.code.coding:CPTCoding">
            <path value="Procedure.code.coding"/>
            <sliceName value="CPTCoding"/>
            <short value="Procedure codes from CPT"/>
            <definition value="A reference to a CPT code for the purpose of billing."/>
            <comment value="Ordering of codings is undefined and SHALL NOT be used to infer meaning. Generally, at most only one of the coding values will be labeled as UserSelected = true."/>
            <requirements value="Allows for alternative encoding with a CPT code."/>
            <mustSupport value="true"/>
            <binding>
                <strength value="required"/>
                <description value="CPT codes describing the type of Procedure"/>
                <valueSet value="http://hl7.org/fhir/ValueSet/cpt-all"/>
            </binding>
        </element>
        <element id="Procedure.code.coding:CPTCoding.system">
            <path value="Procedure.code.coding.system"/>
            <min value="1"/>
            <fixedUri value="http://www.ama-assn.org/go/cpt"/>
            <mustSupport value="true"/>
        </element>
        <element id="Procedure.code.coding:LOINCCoding">
            <path value="Procedure.code.coding"/>
            <sliceName value="LOINCCoding"/>
            <short value="Procedure codes from LOINC"/>
            <definition value="A reference to a LOINC code that may be used to further specify the procedure performed."/>
            <comment value="Ordering of codings is undefined and SHALL NOT be used to infer meaning. Generally, at most only one of the coding values will be labeled as UserSelected = true."/>
            <requirements value="Allows for alternative encoding with a LOINC code."/>
            <mustSupport value="true"/>
            <binding>
                <strength value="required"/>
                <description value="LOINC codes describing the type of Procedure"/>
                <valueSet value="http://hl7.org/fhir/ValueSet/observation-codes"/>
            </binding>
        </element>
        <element id="Procedure.code.coding:LOINCCoding.system">
            <path value="Procedure.code.coding.system"/>
            <min value="1"/>
            <fixedUri value="http://loinc.org"/>
            <mustSupport value="true"/>
        </element>
        <element id="Procedure.code.coding:HCPCSIICoding">
            <path value="Procedure.code.coding"/>
            <sliceName value="HCPCSIICoding"/>
            <short value="Procedure codes from HCPCS Level II"/>
            <definition value="A reference to a HCPCS Level II code for the purpose of billing."/>
            <comment value="Ordering of codings is undefined and SHALL NOT be used to infer meaning. Generally, at most only one of the coding values will be labeled as UserSelected = true."/>
            <requirements value="Allows for alternative encoding with a HCPCS Level II code."/>
            <mustSupport value="true"/>
            <binding>
                <strength value="required"/>
                <description value="HCPCS Level II codes describing the type of Procedure"/>
                <valueSet value="http://hl7.org/fhir/us/sdoh-clinicalcare/ValueSet/SDOHCC-ValueSetHCPCSII"/>
            </binding>
        </element>
        <element id="Procedure.code.coding:HCPCSIICoding.system">
            <path value="Procedure.code.coding.system"/>
            <min value="1"/>
            <fixedUri value="urn:oid:2.16.840.1.113883.6.285"/>
        </element>
        <element id="Procedure.reasonCode">
            <path value="Procedure.reasonCode"/>
            <comment value="Procedure.reasonCode and Procedure.reasonReference are not meant to be duplicative.  For a single reason, either Procedure.reasonCode or Procedure.reasonReference can be used. Procedure.reasonCode may be a summary code, or Procedure.reasonReference may be used to reference a very precise definition of the reason using Condition | Observation | Procedure | DiagnosticReport | DocumentReference.  Both Procedure.reasonCode and Procedure.reasonReference can be used if they are describing different reasons for the procedure.&#xD;&#xA;&#xD;&#xA;Information represented by Procedure.reasonCode may overlap significantly with information represented by Procedure.reasonReference. Multiple approaches to representing the same information may negatively impact interoperability. Therefore, where similar information could be provided by either Procedure.reasonCode or Procedure.reasonReference, it is recommended that Procedure.reasonReference be used to provide a reason for why a procedure was performed.&#xD;&#xA;&#xD;&#xA;As the Gravity Project continues to refine content for the SDOH categories (e.g., food, housing, transportation, etc.), this value set may be refined to codes that pertain to SDOH categories."/>
        </element>
        <element id="Procedure.reasonReference">
            <path value="Procedure.reasonReference"/>
            <slicing>
                <discriminator>
                    <type value="profile"/>
                    <path value="resolve()"/>
                </discriminator>
                <rules value="open"/>
            </slicing>
            <comment value="Procedure.reasonCode and Procedure.reasonReference are not meant to be duplicative.  For a single reason, either Procedure.reasonCode or Procedure.reasonReference can be used.  Procedure.reasonCode may be a summary code, or Procedure.reasonReference may be used to reference a very precise definition of the reason using Condition | Observation | Procedure | DiagnosticReport | DocumentReference.  Both Procedure.reasonCode and Procedure.reasonReference can be used if they are describing different reasons for the procedure.&#xD;&#xA;&#xD;&#xA;Additionally, see Comments for reasonCode."/>
        </element>
        <element id="Procedure.reasonReference:SupportedReasonReference">
            <path value="Procedure.reasonReference"/>
            <sliceName value="SupportedReasonReference"/>
            <comment value="Procedure.reasonCode and Procedure.reasonReference are not meant to be duplicative.  For a single reason, either Procedure.reasonCode or Procedure.reasonReference can be used.  Procedure.reasonCode may be a summary code, or Procedure.reasonReference may be used to reference a very precise definition of the reason using Condition | Observation | Procedure | DiagnosticReport | DocumentReference.  Both Procedure.reasonCode and Procedure.reasonReference can be used if they are describing different reasons for the procedure."/>
            <requirements value="When a procedure is justified by one or more SDOH conditions or observations, Procedure.reasonReference should reference instances that comply with the SDOHCC Condition profile, or one of the SDOHCC Observation profiles. However, references to other instance types are also possible."/>
            <type>
                <code value="Reference"/>
                <targetProfile value="http://hl7.org/fhir/us/sdoh-clinicalcare/StructureDefinition/SDOHCC-Condition"/>
                <targetProfile value="http://hl7.org/fhir/us/sdoh-clinicalcare/StructureDefinition/SDOHCC-ObservationScreeningResponse"/>
                <targetProfile value="http://hl7.org/fhir/us/sdoh-clinicalcare/StructureDefinition/SDOHCC-ObservationAssessment"/>
            </type>
            <mustSupport value="true"/>
        </element>
    </differential>
</StructureDefinition>